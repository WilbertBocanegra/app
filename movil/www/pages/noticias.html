<template>
  <div class="page">
    <div class="navbar">
      <div class="navbar-bg"></div>

      <div class="navbar-inner sliding">
        <div class="title" style="-moz-user-select: none; -webkit-user-select: none; -ms-user-select:none; user-select:none;-o-user-select:none;">Noticias</div>
        <!--  <div class="title-large bg-color-white">
          <div class="title-large-text">Noticias</div>
        </div>-->
      </div>
    </div>
    <div class="page-content  ">


      {{#each noticias}}
        <div class="card card-expandable">
          <div class="card-content">
            <div style="background: url('http://www.uttab.edu.mx/images/2451/{{picpreview}}') no-repeat center top; background-size: cover; height: 400px">
              <div class="card-header text-color-white display-block">
                {{title}}
                <br>
                <small style="opacity: 0.7">{{dodate}}</small>
              </div>

              <a href="#" class="link card-close card-opened-fade-in color-white" style="position: absolute; right: 15px; top: 15px">
                <i class="icon f7-icons">xmark_circle_fill</i>
              </a>
            </div>
            <div class="card-content-padding">
              {{content}}
              <p>
                <a href="#" class="button button-fill button-round button-large card-close">CERRAR</a>
              </p>
            </div>
          </div>
        </div>
      {{/each}}
    </div>
  </div>
</template>

<script>
  return {
    data: function() {
      return {
        noticias: [],
        loading: true,
      }
    },
    methods: {
      aceptar: function(color) {
        app.dialog.alert(color)
      }
    },
    on: {
      pageInit: function() {
        var self = this;
        let _news = [];


        app.request({
          url: 'http://webcore.uttab.edu.mx/webcore/apps/getnews.jsp',
          success: function(data) {
            var news = eval(atob(JSON.parse(data).data));
            //var news = atob(data.data);
            console.log(news)
            self.$setState({
              noticias: news,
            });

          }
        })

      },
    },
  };
</script>
